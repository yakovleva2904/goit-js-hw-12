{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n        <img\n          class=\"gallery-img\"\n          src=\"${imgInfo.webformatURL}\"\n          alt=\"${imgInfo.tags}\"\n        />\n      </a>\n      <ul class=\"gallery-list\">\n        <li class=\"gallery-list-item\">\n          <p>Likes</p>\n          <p>${imgInfo.likes}</p>\n        </li>\n        <li class=\"gallery-list-item\">\n          <p>Views</p>\n          <p>${imgInfo.views}</p>\n        </li>\n        <li class=\"gallery-list-item\">\n          <p>Comments</p>\n          <p>${imgInfo.comments}</p>\n        </li>\n        <li class=\"gallery-list-item\">\n          <p>Downloads</p>\n          <p>${imgInfo.downloads}</p>\n        </li>\n      </ul>\n    </li>\n`;\n};","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotos = (searchedQuery, page) => {\n  \n  const axiosOptions = {\n    params: {\n      key: '45763885-c72d1bc3425850e6a878d2d7a',\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: page,\n      per_page: 15,\n      safesearch: true,\n    },\n  };\n\n  return axios.get('', axiosOptions);\n};","import { createGalleryCardTemplate } from './js/render-functions.js';\nimport { fetchPhotos } from './js/pixabay-api.js';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nloader.classList.add('is-hidden');\nconst loadMoreBtnEl = document.querySelector('.js-load-more');\nlet currentPage = 1;\nlet searchedValue = '';\n\n\n\nconst lightBox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n\nconst onSearchFormSubmit = async event => {\n\n  try {\n    event.preventDefault();\n    searchedValue = searchFormEl.elements.user_query.value.trim();\n    currentPage = 1;\n    loader.classList.remove('is-hidden');\n\n    if (!searchedValue) {\n      loader.classList.add('is-hidden');\n      iziToast.warning({\n        message: 'Please fill in the search field!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    const response = await fetchPhotos(searchedValue, currentPage);\n\n    if (response.data.hits.length === 0) {\n      loader.classList.add('is-hidden');\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      galleryEl.innerHTML = '';\n      searchFormEl.reset();\n      return;\n    }\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n    \n    galleryEl.innerHTML = galleryCardsTemplate;\n\n    loadMoreBtnEl.classList.remove('is-hidden');\n    loader.classList.add('is-hidden');\n    searchFormEl.reset();\n    lightBox.refresh();\n\n\n  } catch (err) {\n    loader.classList.add('is-hidden');\n    iziToast.error({\n      message: `Ooops! Error: ${err}`,\n      position: 'topRight',\n    });\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  try {\n    currentPage++;\n    loader.classList.remove('is-hidden');\n    const response = await fetchPhotos(searchedValue, currentPage);\n\n    const galleryCardsTemplate = response.data.hits\n      .map(imgDetails => createGalleryCardTemplate(imgDetails))\n      .join('');\n\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    if (currentPage === Math.ceil(response.data.totalHits / 15)) {\n      loadMoreBtnEl.classList.add('is-hidden');\n\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n    smoothScroll();\n    loader.classList.add('is-hidden');\n    searchFormEl.reset();\n    lightBox.refresh();\n\n  } catch (err) {\n    loader.classList.add('is-hidden');\n    iziToast.error({\n      message: `Ooops! Error: ${err}`,\n      position: 'topRight',\n    });\n  }\n};\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector('.gallery-card');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);\n  \n//console.log(searchFormEl);"],"names":["createGalleryCardTemplate","imgInfo","axios","fetchPhotos","searchedQuery","page","axiosOptions","searchFormEl","galleryEl","loader","loadMoreBtnEl","currentPage","searchedValue","lightBox","SimpleLightbox","onSearchFormSubmit","event","iziToast","response","galleryCardsTemplate","imgDetails","err","onLoadMoreBtnClick","smoothScroll","firstCard","cardHeight"],"mappings":"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"}